{% extends 'base.html' %}

{% block contenido %}
<div class="container-fluid mt-4">
    <div class="row">
        
        <div class="col-md-3">
            <div class="card shadow-sm">
                <div class="card-header bg-dark text-white">
                    <h5 class="mb-0">Selecciona una Marca</h5>
                </div>
                <div class="list-group list-group-flush">
                    {% for marca in marcas %}
                        <a href="?marca_id={{ marca.id }}" 
                           class="list-group-item list-group-item-action {% if marca_actual.id == marca.id %}active{% endif %}">
                           {{ marca.nombre }}
                        </a>
                    {% empty %}
                        <div class="p-3">No hay marcas registradas.</div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="col-md-9">
            {% if marca_actual %}
                <h3 class="mb-3 text-primary">Productos de: {{ marca_actual.nombre }}</h3>
                
                {% if productos %}
                    <div class="table-responsive">
                        <table class="table table-striped table-hover border">
                            <thead class="table-primary">
                                <tr>
                                    <th>Producto</th>
                                    <th>Modelo</th>
                                    <th>Precio</th>
                                    <th>Stock</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for producto in productos %}
                                    <tr>
                                        <td>{{ producto.nombre }}</td>
                                        <td>{{ producto.modelo }}</td>
                                        <td>{{ producto.precio }} €</td>
                                        <td>{{ producto.unidades }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {% else %}
                    <div class="alert alert-warning">
                        Esta marca no tiene productos registrados actualmente.
                    </div>
                {% endif %}

            {% else %}
                <div class="jumbotron p-5 bg-light border rounded">
                    <h1>Informes de Stock</h1>
                    <p class="lead">Por favor, selecciona una marca del menú de la izquierda para ver el desglose de productos.</p>
                </div>
            {% endif %}
        </div>

    </div>
</div>
{% endblock %}